{"ast":null,"code":"var _jsxFileName = \"/home/kuba/Desktop/React/src/Choice.js\";\nimport React from 'react';\nimport \"./Choice\";\nimport data from './story.json';\n\nclass Choice extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      text: props.text,\n      outcomes: props.outcomes\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.changeState = props.changeState;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.text !== this.props.text) {\n      this.setState({\n        text: this.props.text,\n        outcomes: this.props.outcomes\n      });\n    }\n\n    console.log(\"props changed\");\n  }\n\n  handleClick(e) {\n    console.log(\"KLIK\");\n    let outcome = Math.random();\n    let goToName = '';\n\n    if (outcome < this.state.outcomes[0].probability) {\n      goToName = this.state.outcomes[0].goTo;\n    } else {\n      goToName = this.state.outcomes[1].goTo;\n    }\n\n    console.log(\"goToName\");\n    console.log(goToName);\n    var goToIndex = data.findIndex(function (item, i) {\n      return item.text === goToName;\n    });\n    console.log(\"goToIndex\");\n    console.log(goToIndex);\n    this.changeState(goToIndex);\n  }\n\n  render() {\n    return React.createElement(\"button\", {\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, this.state.text);\n  }\n\n}\n\nexport default Choice;","map":{"version":3,"sources":["/home/kuba/Desktop/React/src/Choice.js"],"names":["React","data","Choice","Component","constructor","props","state","text","outcomes","handleClick","bind","changeState","componentDidUpdate","prevProps","setState","console","log","e","outcome","Math","random","goToName","probability","goTo","goToIndex","findIndex","item","i","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,UAAP;AACA,OAAOC,IAAP,MAAiB,cAAjB;;AAEA,MAAMC,MAAN,SAAqBF,KAAK,CAACG,SAA3B,CAAoC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAW;AACPC,MAAAA,IAAI,EAACF,KAAK,CAACE,IADJ;AAEPC,MAAAA,QAAQ,EAACH,KAAK,CAACG;AAFR,KAAX;AAIA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,WAAL,GAAiBN,KAAK,CAACM,WAAvB;AACH;;AAEDC,EAAAA,kBAAkB,CAACC,SAAD,EAAW;AACzB,QAAGA,SAAS,CAACN,IAAV,KAAmB,KAAKF,KAAL,CAAWE,IAAjC,EAAsC;AAClC,WAAKO,QAAL,CAAc;AACVP,QAAAA,IAAI,EAAE,KAAKF,KAAL,CAAWE,IADP;AAEVC,QAAAA,QAAQ,EAAE,KAAKH,KAAL,CAAWG;AAFX,OAAd;AAIH;;AACDO,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH;;AAEDP,EAAAA,WAAW,CAACQ,CAAD,EAAG;AAEVF,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,QAAIE,OAAO,GAAGC,IAAI,CAACC,MAAL,EAAd;AACA,QAAIC,QAAQ,GAAG,EAAf;;AACA,QAAGH,OAAO,GAAG,KAAKZ,KAAL,CAAWE,QAAX,CAAoB,CAApB,EAAuBc,WAApC,EAAgD;AAC5CD,MAAAA,QAAQ,GAAG,KAAKf,KAAL,CAAWE,QAAX,CAAoB,CAApB,EAAuBe,IAAlC;AACH,KAFD,MAEO;AACHF,MAAAA,QAAQ,GAAG,KAAKf,KAAL,CAAWE,QAAX,CAAoB,CAApB,EAAuBe,IAAlC;AACH;;AAEDR,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYK,QAAZ;AAIA,QAAIG,SAAS,GAAGvB,IAAI,CAACwB,SAAL,CAAe,UAASC,IAAT,EAAeC,CAAf,EAAiB;AAC5C,aAAOD,IAAI,CAACnB,IAAL,KAAcc,QAArB;AACH,KAFe,CAAhB;AAIAN,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYQ,SAAZ;AAGA,SAAKb,WAAL,CAAiBa,SAAjB;AACH;;AAEDI,EAAAA,MAAM,GAAE;AACJ,WACI;AAAQ,MAAA,OAAO,EAAE,KAAKnB,WAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoC,KAAKH,KAAL,CAAWC,IAA/C,CADJ;AAGH;;AApD+B;;AAuDpC,eAAeL,MAAf","sourcesContent":["import React from 'react';\r\nimport \"./Choice\";\r\nimport data from './story.json';\r\n\r\nclass Choice extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            text:props.text,\r\n            outcomes:props.outcomes\r\n        };\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.changeState=props.changeState;\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(prevProps.text !== this.props.text){\r\n            this.setState({\r\n                text: this.props.text,\r\n                outcomes: this.props.outcomes\r\n            });\r\n        }\r\n        console.log(\"props changed\")\r\n    }\r\n\r\n    handleClick(e){\r\n        \r\n        console.log(\"KLIK\")\r\n        let outcome = Math.random();\r\n        let goToName = '';\r\n        if(outcome < this.state.outcomes[0].probability){\r\n            goToName = this.state.outcomes[0].goTo;\r\n        } else {\r\n            goToName = this.state.outcomes[1].goTo;  \r\n        }\r\n\r\n        console.log(\"goToName\");\r\n        console.log(goToName);\r\n\r\n\r\n\r\n        var goToIndex = data.findIndex(function(item, i){\r\n            return item.text === goToName\r\n        });\r\n\r\n        console.log(\"goToIndex\");\r\n        console.log(goToIndex)\r\n        \r\n\r\n        this.changeState(goToIndex);\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <button onClick={this.handleClick}>{this.state.text}</button>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Choice;"]},"metadata":{},"sourceType":"module"}